(function(){"use strict";var n=angular.module("app",["common","ui.router"]);n.run(["$rootScope","$location",function(){}])})(),function(){"use strict";function t(n,t,i){n.html5Mode(!0);i.otherwise("/");t.state("main",{url:"/",templateUrl:"loadPartial/Main/Index",controller:"indexMainCtrl",controllerAs:"vm",resolve:{}}).state("dashboard",{url:"/dashboard",templateUrl:"loadPartial/Dashboard/Index",controller:"indexDashboardCtrl",controllerAs:"vm",resolve:{init:["dashboardSignalRSvc",function(n){return console.log("loading dashboard service..."),n.initialize()}]}}).state("webapi",{url:"/webapi",templateUrl:"loadPartial/WebAPI/Index",controller:"indexWebAPICtrl",controllerAs:"vm",resolve:{}}).state("refreshapp",{url:"/refreshapp",templateUrl:"loadPartial/Home/RefreshApp",controller:"refreshAppCtrl",controllerAs:"vm",resolve:{}})}var n=angular.module("app");n.config(["$locationProvider","$stateProvider","$urlRouterProvider",t])}(),function(){"use strict";var n=angular.module("app"),t,i;toastr.options.timeOut=4e3;toastr.options.positionClass="toast-bottom-left";t={controllerActivateSuccess:"controller.activateSuccess"};i={servicesUri:"http://localhost:45555/"};n.constant("urlServices",i);n.config(["commonConfigProvider",function(n){n.configuration.controllerActivateSuccessEvent=t.controllerActivateSuccess}])}(),function(){"use strict";function t(n,t,i,r,u){function f(n,i){return t.all(n).then(function(){var n={controllerIdentifier:i};e(u.configuration.controllerActivateSuccessEvent,n)})}function e(){return n.$broadcast.apply(n,arguments)}return{$q:t,activateController:f,logger:i,serviceManager:r}}var n=angular.module("common",[]);n.provider("commonConfig",function(){this.configuration={};this.$get=function(){return{configuration:this.configuration}}});n.factory("common",["$rootScope","$q","logger","serviceManager","commonConfig",t])}(),function(){"use strict";function n(n){function r(n,t){t=t||"log";switch(t.toLowerCase()){case"success":t="logSuccess";break;case"error":t="logError";break;case"warn":t="logWarning";break;case"warning":t="logWarning"}var r=i[t]||i.log;return function(t,i,u){r(t,i,n,u===undefined?!0:u)}}function u(n,i,r,u){t(n,i,r,u,"info")}function f(n,i,r,u){t(n,i,r,u,"warning")}function e(n,i,r,u){t(n,i,r,u,"success")}function o(n,i,r,u){t(n,i,r,u,"error")}function t(t,i,r,u,f){var e=f==="error"?n.error:n.log;r=r?"["+r+"] ":"";e(r,t,i);u&&(f==="error"?toastr.error(t):f==="warning"?toastr.warning(t):f==="success"?toastr.success(t):toastr.info(t))}var i={getLogFn:r,log:u,logError:o,logSuccess:e,logWarning:f};return i}angular.module("common").factory("logger",["$log",n])}(),function(){"use strict";angular.module("common").factory("serviceManager",["$http","$state","$q","$rootScope",function(n,t,i){return function(t,r,u){var f=i.defer(),e=function(){n({method:r,url:t,data:u}).then(function(n){f.resolve(n)},function(n){f.reject(n)})};return e(),f.promise}}])}(),function(){"use strict";function t(t,i){function u(){i.activateController([],n).then(function(){console.log("load main controller...")})}var r=this;r.title="Welcome to the main page!";u()}var n="indexMainCtrl";angular.module("app").controller(n,["$scope","common",t])}(),function(){"use strict";function t(t,i,r,u){function v(){angular.isDefined(e)||(e=i(function(){},c))}function y(){angular.isDefined(e)&&(i.cancel(e),e=undefined)}function p(){r.activateController([],n).then(function(){console.log("load dashboard controller...");v();for(var n=0;n<=9;n++)f.dataCollection.push({Name:"receiving data...",Value:"receiving data...",Timestamp:"receiving data..."})})}function w(n){o.push({x:parseFloat(s),y:parseFloat(n)});s++;o.length>a&&o.shift();h.render()}var f=this,e,c=1e3,l=10,o=[],s=0,a=10,h;f.title="Welcome to the dashboard page!";f.description="Streaming real time data from SignalR hub to AngularJS factory.";f.dataCollection=[];f.result="";t.$on("$destroy",function(){y()});h=new CanvasJS.Chart("graphContainer",{backgroundColor:"transparent",title:{text:"Temperature (real-time)"},axisX:{title:"Time"},axisY:{title:"deg F"},data:[{type:"line",markerColor:"blue",dataPoints:o}]});t.$watch(function(){return u.notificationInLive},function(n){n.Timestamp&&(f.dataCollection.unshift({Name:n.Name,Value:n.Value,Timestamp:n.Timestamp}),w(n.Value))},!0);t.$watch(function(){return f.dataCollection},function(){f.dataCollection.length>l&&f.dataCollection.pop()},!0);p()}var n="indexDashboardCtrl";angular.module("app").controller(n,["$scope","$interval","common","dashboardSignalRSvc",t])}(),function(){"use strict";function t(t,i,r){function f(){i.activateController([],n).then(function(){console.log("load web api controller...")})}function e(){r.getData().then(function(n){u.result=n[0]},function(){u.result=""})}var u=this;u.title="Welcome to the Web API page!";u.getData=e;f()}var n="indexWebAPICtrl";angular.module("app").controller(n,["$scope","common","dashboardSvc",t])}(),function(){"use strict";function n(n,t,i){function r(n){return i(t.servicesUri+"api/service/AddData","post",{element:n})}function u(n){return i(t.servicesUri+"api/service/UpdateData","post",{element:n})}function f(n){return i(t.servicesUri+"api/service/DeleteData","post",{id:n})}function e(){return i(t.servicesUri+"api/service/getData","get",null)}return{addData:r,updateData:u,deleteData:f,getData:e}}angular.module("app").factory("dashboardRestSvc",["common","urlServices","serviceManager",n])}(),function(){"use strict";function i(i){function c(n,i){try{t&&console.log("["+(new Date).format("dd/mm/yyyy HH:MM:ss L tt")+"] - "+n);switch(i){case r.SUCCESS:u.showSuccess&&h(n,null,!0);break;case r.INFORMATION:u.showInformation&&e(n);break;case r.WARNING:u.showWarning&&s(n);break;case r.DEBUG:u.showDebug&&e(n);break;case r.EXCEPTION:u.showException&&o(n,null,!0)}}catch(f){console.log("there was an error logging data. "+f)}}var f=i.logger.getLogFn,e=f(n),o=f(n,"Error"),s=f(n,"warning"),h=i.logger.getLogFn(n,"success"),u={showSuccess:!0,showInformation:!0,showWarning:!0,showDebug:!0,showException:!0},r={INFORMATION:"INFORMATION",WARNING:"WARNING",EXCEPTION:"EXCEPTION",SUCCESS:"SUCCESS",DEBUG:"DEBUG"};return{loggingTypes:r,logging:c}}var n="loggingSvc",t;angular.module("app").factory(n,["common",i]);t=!1}(),function(){"use strict";function n(n,t){function e(){var n=t.$q.defer();i=jQuery.connection.hub.createHubProxy("dashboardhub");i.on("updateNotification",function(n){s(n)});return jQuery.connection.hub.start().then().then(function(){}).done(function(){f();n.resolve(!0)}),console.log("dashboard service loaded..."),n.promise}function f(){r.server.enableNotifications()}function o(){r.server.disableNotifications()}function s(n){angular.copy({Name:n.Name,Value:n.Value,Timestamp:n.Timestamp},u)}var i=null,r=jQuery.connection.dashboardhub,u={Name:"",Value:"",Timestamp:""};return{initialize:e,enableNotifications:f,disableNotifications:o,notificationInLive:u}}angular.module("app").factory("dashboardSignalRSvc",["$rootScope","common","loggingSvc",n])}(),function(){"use strict";function n(n,t,i,r,u){function f(n){var i=t.$q.defer();return r.addData(n).then(function(t){n.id=t.data.response;u.logging("element created successfully.",u.loggingTypes.DEBUG);i.resolve(n)},function(n){u.logging(n.data,u.loggingTypes.EXCEPTION);i.reject("Error")}),i.promise}function e(n){var i=t.$q.defer();return r.updateData(n).then(function(){u.logging("element updated successfully.",u.loggingTypes.DEBUG);i.resolve(n)},function(n){u.logging(n.data,u.loggingTypes.EXCEPTION);i.reject("Error")}),i.promise}function o(n){var i=t.$q.defer();return r.deleteData(n).then(function(n){u.logging("element deleted successfully.",u.loggingTypes.DEBUG);i.resolve(n)},function(n){u.logging(n.data,u.loggingTypes.EXCEPTION);i.reject("Error")}),i.promise}function s(){var n=t.$q.defer();return u.logging("elements requested.",u.loggingTypes.WARNING),r.getData().then(function(t){n.resolve(t.data);u.logging("elements retrieved successfully.",u.loggingTypes.DEBUG)},function(t){u.logging("Error loading messages. "+t.data.ExceptionMessage,u.loggingTypes.EXCEPTION);n.reject("Error")}),n.promise}return{addData:f,updateData:e,deleteData:o,getData:s}}angular.module("app").factory("dashboardSvc",["$filter","common","urlServices","dashboardRestSvc","loggingSvc",n])}();
//# sourceMappingURL=application.min.js.map
